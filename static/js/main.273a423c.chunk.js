(this.webpackJsonplubepos=this.webpackJsonplubepos||[]).push([[0],{138:function(e,t,a){e.exports=a(307)},143:function(e,t,a){},144:function(e,t,a){},178:function(e,t,a){},183:function(e,t,a){},26:function(e){e.exports=JSON.parse('{"Acura":["2.2CL","2.3CL","3.0CL","3.2CL","ILX","Integra","Legend","MDX","NSX","RDX","3.5 RL","RL","RSX","SLX","2.5TL","3.2TL","TL","TSX","Vigor","ZDX"],"Alfa Romeo":["164","8C Competizione","GTV-6","Milano","Spider"],"AMC":["Alliance","Concord","Eagle","Encore","Spirit"],"Aston Martin":["DB7","DB9","DBS","Lagonda","Rapide","V12 Vantage","V8 Vantage","Vanquish","Virage"],"Audi":["100","200","4000","5000","80","90","A3","A4","A5","A6","A7","A8","allroad","Cabriolet","Coupe","Q3","Q5","Q7","Quattro","R8","RS 4","RS 5","RS 6","S4","S5","S6","S7","S8","TT","TT RS","TTS","V8 Quattro"],"Avanti":["Convertible","Coupe","Sedan"],"Bentley":["Arnage","Azure","Brooklands","Continental","Corniche","Eight","Mulsanne","Turbo R"],"BMW":["128i","135i","135is","318i","318iC","318iS","318ti","320i","323ci","323i","323is","323iT","325Ci","325e","325es","325i","325is","325iX","325xi","328Ci","328i","328iS","328xi","330Ci","330i","330xi","335d","335i","335is","335xi","ActiveHybrid 3","325","524td","525i","525xi","528e","528i","528iT","528xi","530i","530iT","530xi","533i","535i","535i Gran Turismo","535xi","540i","545i","550i","550i Gran Turismo","ActiveHybrid 5","633CSi","635CSi","640i","640i Gran Coupe","645Ci","650i","650i Gran Coupe","L6","733i","735i","735iL","740i","740iL","740Li","745i","745Li","750i","750iL","750Li","760i","760Li","ActiveHybrid 7","Alpina B7","840Ci","850Ci","850CSi","850i","L7","1 Series M","M Coupe","M Roadster","M3","M5","M6","X5 M","X6 M","ActiveHybrid X6","X1","X3","X5","X6","Z3","Z4","Z8"],"Buick":["Century","Electra","Enclave","Encore","LaCrosse","Le Sabre","Lucerne","Park Avenue","Rainier","Reatta","Regal","Rendezvous","Riviera","Roadmaster","Skyhawk","Skylark","Somerset","Terraza","Verano"],"Cadillac":["Allante","ATS","Brougham","Catera","Cimarron","CTS","De Ville","DTS","Eldorado","Escalade","Escalade ESV","Escalade EXT","Fleetwood","Seville","SRX","STS","XLR","XTS"],"Chevrolet":["Astro","Avalanche","Aveo","Aveo5","Beretta","Blazer","Camaro","Caprice","Captiva Sport","Cavalier","Celebrity","Chevette","Citation","Cobalt","Colorado","Corsica","Corvette","Cruze","El Camino","Equinox","Express Van","G Van","HHR","Impala","Kodiak C4500","Lumina","Lumina APV","LUV","Malibu","Metro","Monte Carlo","Nova","Prizm","S10 Blazer","S10 Pickup","Silverado and other C/K1500","Silverado and other C/K2500","Silverado and other C/K3500","Sonic","Spark","Spectrum","Sprint","SSR","Suburban","Tahoe","Tracker","TrailBlazer","TrailBlazer EXT","Traverse","Uplander","Venture","Volt"],"Chrysler":["200","300","300M","Aspen","Caravan","Cirrus","Concorde","Conquest","Cordoba","Crossfire","E Class","Fifth Avenue","Grand Voyager","Imperial","Intrepid","Laser","LeBaron","LHS","Neon","New Yorker","Newport","Pacifica","Prowler","PT Cruiser","Sebring","TC by Maserati","Town &amp; Country","Voyager"],"Daewoo":["Lanos","Leganza","Nubira"],"Daihatsu":["Charade","Rocky"],"Datsun":["200SX","210","280ZX","300ZX","310","510","720","810","Maxima","Pickup","Pulsar","Sentra","Stanza"],"DeLorean":["DMC-12"],"Dodge":["400","600","Aries","Avenger","Caliber","Caravan","Challenger","Charger","Colt","Conquest","D/W Truck","Dakota","Dart","Daytona","Diplomat","Durango","Dynasty","Grand Caravan","Intrepid","Journey","Lancer","Magnum","Mirada","Monaco","Neon","Nitro","Omni","Raider","Ram 1500 Truck","Ram 2500 Truck","Ram 3500 Truck","Ram 4500 Truck","Ram 50 Truck","RAM C/V","Ram SRT-10","Ram Van","Ram Wagon","Ramcharger","Rampage","Shadow","Spirit","Sprinter","SRT-4","St. Regis","Stealth","Stratus","Viper"],"Eagle":["Medallion","Premier","Summit","Talon","Vision"],"Ferrari":["308 GTB Quattrovalvole","308 GTBI","308 GTS Quattrovalvole","308 GTSI","328 GTB","328 GTS","348 GTB","348 GTS","348 Spider","348 TB","348 TS","360","456 GT","456M GT","458 Italia","512 BBi","512M","512TR","550 Maranello","575M Maranello","599 GTB Fiorano","599 GTO","612 Scaglietti","California","Enzo","F355","F40","F430","F50","FF","Mondial","Testarossa"],"FIAT":["2000 Spider","500","Bertone X1/9","Brava","Pininfarina Spider","Strada","X1/9"],"Fisker":["Karma"],"Ford":["Aerostar","Aspire","Bronco","Bronco II","C-MAX","Club Wagon","Contour","Courier","Crown Victoria","E-150 and Econoline 150","E-250 and Econoline 250","E-350 and Econoline 350","Edge","Escape","Escort","Excursion","EXP","Expedition","Expedition EL","Explorer","Explorer Sport Trac","F100","F150","F250","F350","F450","Fairmont","Festiva","Fiesta","Five Hundred","Flex","Focus","Freestar","Freestyle","Fusion","Granada","GT","LTD","Mustang","Probe","Ranger","Taurus","Taurus X","Tempo","Thunderbird","Transit Connect","Windstar","ZX2 Escort"],"Freightliner":["Sprinter"],"Geo":["Metro","Prizm","Spectrum","Storm","Tracker"],"GMC":["Acadia","Caballero","Canyon","Envoy","Envoy XL","Envoy XUV","Jimmy","Rally Wagon","S15 Jimmy","S15 Pickup","Safari","Savana","Sierra C/K1500","Sierra C/K2500","Sierra C/K3500","Sonoma","Suburban","Syclone","Terrain","TopKick C4500","Typhoon","Vandura","Yukon","Yukon XL"],"Honda":["Accord","Civic","CR-V","CR-Z","CRX","Accord Crosstour","Crosstour","Del Sol","Element","Fit","Insight","Odyssey","Passport","Pilot","Prelude","Ridgeline","S2000"],"HUMMER":["H1","H2","H3","H3T"],"Hyundai":["Accent","Azera","Elantra","Elantra Coupe","Elantra Touring","Entourage","Equus","Excel","Genesis","Genesis Coupe","Santa Fe","Scoupe","Sonata","Tiburon","Tucson","Veloster","Veracruz","XG300","XG350"],"Infiniti":["EX35","EX37","FX35","FX37","FX45","FX50","G20","G25","G35","G37","I30","I35","J30","JX35","M30","M35","M35h","M37","M45","M56","Q45","QX4","QX56"],"Isuzu":["Amigo","Ascender","Axiom","Hombre","i-280","i-290","i-350","i-370","I-Mark","Impulse","Oasis","Pickup","Rodeo","Stylus","Trooper","Trooper II","VehiCROSS"],"Jaguar":["S-Type","X-Type","XF","XJ12","XJ6","XJR","XJR-S","XJS","XJ Vanden Plas","XJ","XJ8","XJ8 L","XJ Sport","XK8","XK","XKR"],"Jeep":["Cherokee","CJ","Comanche","Commander","Compass","Grand Cherokee","Grand Wagoneer","Liberty","Patriot","Pickup","Scrambler","Wagoneer","Wrangler"],"Kia":["Amanti","Borrego","Forte","Forte Koup","Optima","Rio","Rio5","Rondo","Sedona","Sephia","Sorento","Soul","Spectra","Spectra5","Sportage"],"Lamborghini":["Aventador","Countach","Diablo","Gallardo","Jalpa","LM002","Murcielago"],"Lancia":["Beta","Zagato"],"Land Rover":["Defender","Discovery","Freelander","LR2","LR3","LR4","Range Rover","Range Rover Evoque","Range Rover Sport"],"Lexus":["CT 200h","ES 250","ES 300","ES 300h","ES 330","ES 350","GS 300","GS 350","GS 400","GS 430","GS 450h","GS 460","GX 460","GX 470","HS 250h","IS 250","IS 250C","IS 300","IS 350","IS 350C","IS F","LFA","LS 400","LS 430","LS 460","LS 600h","LX 450","LX 470","LX 570","RX 300","RX 330","RX 350","RX 400h","RX 450h","SC 300","SC 400","SC 430"],"Lincoln":["Aviator","Blackwood","Continental","LS","Mark LT","Mark VI","Mark VII","Mark VIII","MKS","MKT","MKX","MKZ","Navigator","Navigator L","Town Car","Zephyr"],"Lotus":["Elan","Elise","Esprit","Evora","Exige"],"Maserati":["430","Biturbo","Coupe","GranSport","GranTurismo","Quattroporte","Spyder"],"Maybach":["57","62"],"Mazda":["323","626","929","B-Series Pickup","CX-5","CX-7","CX-9","GLC","MAZDA2","MAZDA3","MAZDA5","MAZDA6","MAZDASPEED3","MAZDASPEED6","Miata MX5","Millenia","MPV","MX3","MX6","Navajo","Protege","Protege5","RX-7","RX-8","Tribute"],"McLaren":["MP4-12C"],"Mercedes-Benz":["190D","190E","240D","300CD","300CE","300D","300E","300TD","300TE","C220","C230","C240","C250","C280","C300","C320","C32 AMG","C350","C36 AMG","C43 AMG","C55 AMG","C63 AMG","CL500","CL550","CL55 AMG","CL600","CL63 AMG","CL65 AMG","CLK320","CLK350","CLK430","CLK500","CLK550","CLK55 AMG","CLK63 AMG","CLS500","CLS550","CLS55 AMG","CLS63 AMG","260E","280CE","280E","400E","500E","E300","E320","E320 Bluetec","E320 CDI","E350","E350 Bluetec","E400 Hybrid","E420","E430","E500","E550","E55 AMG","E63 AMG","G500","G550","G55 AMG","G63 AMG","GL320 Bluetec","GL320 CDI","GL350 Bluetec","GL450","GL550","GLK350","ML320","ML320 Bluetec","ML320 CDI","ML350","ML350 Bluetec","ML430","ML450 Hybrid","ML500","ML550","ML55 AMG","ML63 AMG","R320 Bluetec","R320 CDI","R350","R350 Bluetec","R500","R63 AMG","300SD","300SDL","300SE","300SEL","350SD","350SDL","380SE","380SEC","380SEL","400SE","400SEL","420SEL","500SEC","500SEL","560SEC","560SEL","600SEC","600SEL","S320","S350","S350 Bluetec","S400 Hybrid","S420","S430","S500","S550","S55 AMG","S600","S63 AMG","S65 AMG","300SL","380SL","380SLC","500SL","560SL","600SL","SL320","SL500","SL550","SL55 AMG","SL600","SL63 AMG","SL65 AMG","SLK230","SLK250","SLK280","SLK300","SLK320","SLK32 AMG","SLK350","SLK55 AMG","SLR","SLS AMG","Sprinter"],"Mercury":["Capri","Cougar","Grand Marquis","Lynx","Marauder","Mariner","Marquis","Milan","Montego","Monterey","Mountaineer","Mystique","Sable","Topaz","Tracer","Villager","Zephyr"],"Merkur":["Scorpio","XR4Ti"],"MINI":["Cooper Clubman","Cooper S Clubman","Cooper Countryman","Cooper S Countryman","Cooper Coupe","Cooper S Coupe","Cooper","Cooper S","Cooper Roadster","Cooper S Roadster"],"Mitsubishi":["3000GT","Cordia","Diamante","Eclipse","Endeavor","Expo","Galant","i","Lancer","Lancer Evolution","Mighty Max","Mirage","Montero","Montero Sport","Outlander","Outlander Sport","Precis","Raider","Sigma","Starion","Tredia","Triton","Van"],"Nissan":["200SX","240SX","300ZX","350Z","370Z","Altima","Armada","Axxess","Cube","Frontier","GT-R","Juke","Leaf","Maxima","Murano","Murano CrossCabriolet","NV","NX","Pathfinder","Pickup","Pulsar","Quest","Rogue","Sentra","Stanza","Titan","Van","Versa","Xterra"],"Oldsmobile":["88","Achieva","Alero","Aurora","Bravada","Custom Cruiser","Cutlass","Cutlass Calais","Cutlass Ciera","Cutlass Supreme","Firenza","Intrigue","Ninety-Eight","Omega","Regency","Silhouette","Toronado"],"Peugeot":["405","504","505","604"],"Plymouth":["Acclaim","Arrow","Breeze","Caravelle","Champ","Colt","Conquest","Gran Fury","Grand Voyager","Horizon","Laser","Neon","Prowler","Reliant","Sapporo","Scamp","Sundance","Trailduster","Voyager"],"Pontiac":["1000","6000","Aztek","Bonneville","Catalina","Fiero","Firebird","G3","G5","G6","G8","Grand Am","Grand Prix","GTO","J2000","Le Mans","Montana","Parisienne","Phoenix","Safari","Solstice","Sunbird","Sunfire","Torrent","Trans Sport","Vibe"],"Porsche":["911","924","928","944","968","Boxster","Carrera GT","Cayenne","Cayman","Panamera"],"RAM":["1500","2500","3500","4500"],"Renault":["18i","Fuego","Le Car","R18","Sportwagon"],"Rolls-Royce":["Camargue","Corniche","Ghost","Park Ward","Phantom","Silver Dawn","Silver Seraph","Silver Spirit","Silver Spur"],"Saab":["9-2X","9-3","9-4X","9-5","9-7X","900","9000"],"Saturn":["Astra","Aura","ION","L100","L200","L300","LS","LW1","LW2","LW200","LW300","Outlook","Relay","SC1","SC2","Sky","SL","SL1","SL2","SW1","SW2","Vue"],"Scion":["FR-S","iQ","tC","xA","xB","xD"],"smart":["fortwo"],"SRT":["Viper"],"Sterling":["825","827"],"Subaru":["Baja","Brat","BRZ","Forester","Impreza","Impreza WRX","Justy","L Series","Legacy","Loyale","Outback","SVX","Tribeca","XT","XV Crosstrek"],"Suzuki":["Aerio","Equator","Esteem","Forenza","Grand Vitara","Kizashi","Reno","Samurai","Sidekick","Swift","SX4","Verona","Vitara","X-90","XL7"],"Tesla":["Roadster","Model S"],"Toyota":["4Runner","Avalon","Camry","Celica","Corolla","Corona","Cressida","Echo","FJ Cruiser","Highlander","Land Cruiser","Matrix","MR2","MR2 Spyder","Paseo","Pickup","Previa","Prius","Prius C","Prius V","RAV4","Sequoia","Sienna","Solara","Starlet","Supra","T100","Tacoma","Tercel","Tundra","Van","Venza","Yaris"],"Triumph":["TR7","TR8"],"Volkswagen":["Beetle","Cabrio","Cabriolet","CC","Corrado","Dasher","Eos","Eurovan","Fox","GLI","Golf R","GTI","Golf","Rabbit","Jetta","Passat","Phaeton","Pickup","Quantum","R32","Routan","Scirocco","Tiguan","Touareg","Vanagon"],"Volvo":["240","260","740","760","780","850","940","960","C30","C70","S40","S60","S70","S80","S90","V40","V50","V70","V90","XC60","XC70","XC90"],"Yugo":["GV","GVC","GVL","GVS","GVX"]}')},306:function(e,t,a){e.exports=a.p+"static/media/index.6fc62ed2.svg"},307:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),o=a.n(l),s=(a(143),a(6)),i=a(7),c=a(9),u=a(8),m=(a(144),a(317)),d=a(318),p=a(311),g=a(46),h=a(18),f=a(77),v=a.n(f),b=function(e){v.a.set("userid",e)},E=function(){return v.a.get("userid")||""},C=function(){v.a.remove("userid")},S=a(78),y=a.n(S);function T(e,t,a){if("GET"===a){var n="";return Object.keys(t).forEach((function(e){n+=e+"="+t[e]+"&"})),n&&(n=n.substring(0,n.length-1)),y.a.get(e+"?"+n)}if("carImages"in t){var r=new FormData;return Object.keys(t).forEach((function(e){if(r.append(e,t[e]),"carImages"===e)for(var a=0;a<t[e].length;a++)r.append(e,t[e][a])})),y.a.post(e,r,{headers:{"Content-Type":"multipart/form-data"}})}return y.a.post(e,t)}var L="https://e307b1922e60.ngrok.io",w=function(e){return T(L+"/users/login",e,"POST")},x=function(e){return T(L+"/items/query",e,"GET")},P=function(e){return T(L+"/items/update",e,"GET")},A=function(e){return T(L+"/items/delete",e,"GET")},N=function(e){return T(L+"/customers/query",e,"GET")},k=function(e){return T(L+"/customers/update",e,"GET")},D=function(e){return T(L+"/customers/delete",e,"GET")},O=function(e){return T(L+"/cars/query",e,"GET")},I=a(24),M=a(11),R=a.n(M),j=a(13),G=function(e){return{type:"login",data:e}},F=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleClick=function(){C(),n.props.history.replace("/login"),n.props.logout()},n.state={navInfo:[{text:"SALES REPORT",href:"/sales_report"},{text:"SALES",href:"/sales"},{text:"CARS",href:"/cars"},{text:"CUSTOMERS",href:"/customers"},{text:"PRODUCTS/SERVICES",href:"/items"}],isLoading:!0,username:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.props.user.user?this.setState({username:this.props.user.user.username,isLoading:!1}):(e={userId:E()},T(L+"/users/query",e,"POST")).then((function(e){0===e.data.err_code?t.setState({username:e.data.user.username}):C(),t.setState({isLoading:!1})})).catch((function(e){C()}))}},{key:"render",value:function(){var e=this.props.history.location.pathname,t=this.state,a=t.isLoading,n=t.username;return r.a.createElement(m.a,{bg:"light",expand:"lg"},r.a.createElement(m.a.Brand,null,"The One Car POS"),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(d.a,{className:"mr-auto"},this.state.navInfo.map((function(t,a){return r.a.createElement(d.a.Link,{as:g.b,to:t.href,key:a,className:e===t.href?"active":""},t.text)}))),a?null:r.a.createElement(m.a.Text,null,"Signed in as: ",n),r.a.createElement(p.a,{className:"btn",variant:"warning",type:"submit",style:{position:"relative",marginLeft:"20px"},disabled:!!a,onClick:this.handleClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(a?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),a?"Loading...":"Logout")))}}]),a}(r.a.Component),B=Object(I.b)((function(e){return{user:e.user}}),{logout:function(){return function(e){e({type:"logout"})}}})(Object(h.g)(F)),X=a(12),V=a(315),U=(a(178),a(26)),q=a(71),W=a.n(q),H=a(15),K=a.n(H),z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).toggleAlert=function(){K()("#".concat(n.props.alertId)).slideToggle()},n.state={timeStamp:n.props.timeStamp},n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.timeStamp!==this.state.timeStamp&&(this.setState({timeStamp:this.props.timeStamp}),"none"===K()("#".concat(this.props.alertId)).css("display")&&this.toggleAlert())}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.value,n=e.alertId;return r.a.createElement("div",{className:"alert alert-".concat(t),id:n,role:"alert",style:{display:"none",width:"100%"}},a,r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:this.toggleAlert},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))}}]),a}(r.a.Component),_=a(14),Y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).handleModelPreContent=function(e){for(var t=[],a=0;a<U[e].length;a++){var n=U[e][a];t.push({value:n,label:n})}return t},n.informAlert=function(e,t){var a=n.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),n.setState(Object(X.a)(Object(X.a)({},n.state),{},{alert:a}))},n.handleChange=function(e){var t=e.target.value,a=e.target.getAttribute("name");n.setState((function(e){var n=Object.assign({},e.userInput);return n[a]=t,{userInput:n}}))},n.handleColorChange=function(e){var t=n.state.userInput;t.color!==e.value&&(t.color=e.value,n.setState({userInput:t}))},n.handleBrandChange=function(e){var t=n.state,a=t.userInput,r=t.modelPreContent;a.brand.value!==e.value&&(r=n.handleModelPreContent(e.value),a.brand=e,a.model=r[0],n.setState({userInput:a,modelPreContent:r}))},n.handleModelChange=function(e){var t=n.state.userInput;t.model.value!==e.value&&(t.model=e,n.setState({userInput:t}))},n.handleOwnerChange=function(e){var t=n.state.userInput;t.owner!==e.value&&(t.owner=e.value,n.setState({userInput:t}))},n.handleClick=function(e){e.preventDefault();var t,a=n.state.userInput;a.plateNumber&&a.year&&a.color&&a.owner&&a.brand&&a.model?(n.setState({isLoading:!0}),a.brand=a.brand.value,a.model=a.model.value,console.log(a),(t=a,T(L+"/cars/insert",t,"POST")).then((function(e){if(0===e.data.err_code){n.props.fromFormToParent("REQUEST DATA",e.data.car);var t=new Date;a.plateNumber="",a.year=t.getFullYear(),a.carImages="";for(var r=document.getElementsByClassName("deleteImage"),l=0;l<r.length;l++)r[l].click();n.informAlert("Insert success","success"),n.setState({userInput:a})}else n.informAlert("Insert fail ".concat(e.data.message),"danger");n.setState({isLoading:!1})})).catch((function(e){n.informAlert("Insert fail ".concat(e),"danger"),n.setState({isLoading:!1}),console.log(e)}))):n.informAlert("One or more required fields are empty")},n.onDrop=function(e){var t=n.state.userInput;t.carImages=e,n.setState({userInput:t})},n.requestData=function(e){n.setState({isLoading:!0}),N({currentPageCount:e}).then((function(e){if(0===e.data.err_code){for(var t=n.state.ownerPreContent,a=0;a<e.data.customers.length;a++)t.push({value:e.data.customers[a]._id,label:e.data.customers[a].name});n.props.fromFormToParent("TRANSFER DATA",t),n.setState({ownerPreContent:t,isLoading:!1})}else n.informAlert("Request customer data fail ".concat(e.data.message),"danger")})).catch((function(e){n.informAlert("Request customer data fail ".concat(e),"danger"),n.setState({isLoading:!1}),console.log(e)}))};var r=[];Object.keys(U).map((function(e,t){r.push({value:e,label:e})}));var l=new Date,o=n.handleModelPreContent(r[0].value);return n.state={colorPreContent:[{value:"WHITE",label:"WHITE"},{value:"BLACK",label:"BLACK"},{value:"PURPLE",label:"PURPLE"},{value:"BLUE",label:"BLUE"},{value:"NAVY",label:"NAVY"},{value:"GREEN",label:"GREEN"},{value:"YELLOW",label:"YELLOW"},{value:"ORANGE",label:"ORANGE"},{value:"RED",label:"RED"},{value:"\u0e40\u0e17\u0e32",label:"\u0e40\u0e17\u0e32"}],brandPreContent:r,modelPreContent:o,ownerPreContent:[],userInput:{plateNumber:"",year:l.getFullYear(),color:"",owner:"",brand:r[0],model:o[0],oldCarImagesURLs:[],carImages:""},isLoading:!1,alert:{type:"success",value:"success",timeStamp:Date.now()}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.requestData(0)}},{key:"render",value:function(){var e=this.state,t=e.userInput,a=e.colorPreContent,n=e.brandPreContent,l=e.modelPreContent,o=e.ownerPreContent,s=e.isLoading,i=e.alert;return r.a.createElement(V.a,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Plate Number"),r.a.createElement("input",{type:"text",className:"form-control",style:{textAlign:"left"},onChange:this.handleChange,name:"plateNumber",value:t.plateNumber})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Year"),r.a.createElement("input",{type:"number",className:"form-control",style:{textAlign:"left"},onChange:this.handleChange,name:"year",value:t.year})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Color"),r.a.createElement(_.a,{options:a,onChange:this.handleColorChange})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Brand"),r.a.createElement(_.a,{value:t.brand,options:n,onChange:this.handleBrandChange})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Model"),r.a.createElement(_.a,{value:t.model,options:l,onChange:this.handleModelChange})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Owner"),r.a.createElement(_.a,{options:o,onChange:this.handleOwnerChange})),r.a.createElement("div",{className:"col-6 col-md-3"}),r.a.createElement(W.a,{withIcon:!0,buttonText:"Choose images",onChange:this.onDrop,imgExtension:[".jpg","jpeg",".gif",".png"],label:"Max file size: 5mb, accepted: jpg|jpeg|gif|png",maxFileSize:5242880,withPreview:!0}),r.a.createElement("div",{className:"row-cols-2"})),r.a.createElement("br",null),r.a.createElement(V.a.Row,null,r.a.createElement("div",{className:"col-6 col-md-1"},r.a.createElement(p.a,{variant:"primary",type:"submit",style:{position:"relative"},disabled:!!s,onClick:this.handleClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(s?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),s?"Loading...":"Submit"))),r.a.createElement("br",null),r.a.createElement(V.a.Row,null,r.a.createElement(z,{type:i.type,value:i.value,timeStamp:i.timeStamp,alertId:"alert-cars-form"})))}}]),a}(r.a.Component),J=a(319),Q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(e){K()(e.target.nextElementSibling).slideToggle(),K()("#i-angle").toggleClass("rotate-open")},e.fromFormToParent=function(t,a){switch(t){case"REQUEST DATA":e.props.fromWrapperToParent("REQUEST DATA",a);break;case"TRANSFER DATA":e.props.fromWrapperToParent("TRANSFER DATA",a)}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(J.a,null,r.a.createElement("i",{id:"i-angle",className:"rotate-open"}),r.a.createElement("h5",{className:"card-header",onClick:this.handleClick,style:{cursor:"pointer"}},"\xa0\xa0\xa0\xa0Add a new car record"),r.a.createElement(J.a.Body,null,r.a.createElement(Y,{editingData:this.props.editingData,fromFormToParent:function(t,a){return e.fromFormToParent(t,a)}})))}}]),a}(r.a.Component),Z=a(316),$=a(72),ee=(a(109),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement(Z.a,{interval:null},e.imageURLs.map((function(t,a){return r.a.createElement(Z.a.Item,{key:a,style:{height:"300px"}},r.a.createElement($.LazyLoadImage,{wrapperClassName:"img-thumbnail",style:{minBlockSize:"-webkit-fill-available"},alt:e.brand,effect:"blur",src:"http://127.0.0.1:4000/images/".concat(t),width:"100%"}),r.a.createElement(Z.a.Caption,null,r.a.createElement("h3",null,e.brand),r.a.createElement("p",null,e.model)))})))}}]),a}(r.a.Component)),te=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleEditClick=function(){n.props.fromCardToParent("EDIT",n.props.data)},n.handleDeleteClick=function(){var e;n.setState({isLoading:!0}),(e={_id:n.props.data._id},T(L+"/cars/delete",e,"GET")).then((function(e){0===e.data.err_code?n.props.fromCardToParent("DELETE SUC",n.props.data):n.props.fromCardToParent("DELETE FAIL",e.data.message),n.setState({isLoading:!1})})).catch((function(e){n.props.fromCardToParent("DELETE FAIL",e),n.setState({isLoading:!1})}))},n.state={isLoading:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.data,t=this.state.isLoading;return r.a.createElement("div",{className:"col",style:{margin:"10px 0px"}},r.a.createElement("div",{className:"card h-100",id:"card-detail-cars"},r.a.createElement(ee,{className:"card-img-top",data:e}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.brand+" "+e.model),r.a.createElement("p",{className:"card-text"},"Owner: ",e.owner.name),r.a.createElement("p",{className:"card-text"},"Year: ",e.year),r.a.createElement("p",{className:"card-text"},"Color: ",e.color),r.a.createElement("p",{className:"card-text"},"Plate Number: ",e.plateNumber),r.a.createElement("div",{className:"row row-cols-6"},r.a.createElement(p.a,{className:"col-5",variant:"primary",type:"submit",style:{position:"relative",margin:"0 10px"},disabled:!!t,onClick:this.handleEditClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(t?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),t?"Loading...":"Edit"),r.a.createElement(p.a,{className:"col-5",variant:"danger",type:"submit",style:{position:"relative",margin:"0 10px"},disabled:!!t,onClick:this.handleDeleteClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(t?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),t?"Loading...":"Delete")))))}}]),a}(r.a.Component),ae=(a(183),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleDropDownClick=function(e){e.preventDefault(),K()(e.target.nextElementSibling).slideToggle()},n.handleDropDownItemClick=function(e){var t=e.target.innerText;t!==n.state.fields&&(n.props.transferMsg(t,"SEARCH FIELD"),n.setState({fields:t,value:""})),K()(e.target.parentElement).slideToggle()},n.handleChange=function(e){var t=n.state.value;t=e.target.value,n.setState(Object(X.a)(Object(X.a)({},n.state),{},{value:t}))},n.enterTriggerSearch=function(e){13===e.keyCode&&n.props.transferMsg(n.state.value,"TRIGGER SEARCH")},n.clickTriggerSearch=function(){n.props.transferMsg(n.state.value,"TRIGGER SEARCH")},n.state={value:"",fields:n.props.fields},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.fields;return r.a.createElement("div",{className:"input-group input-field col-12 col-md-3"},r.a.createElement("div",{className:"input-group-prepend",style:{height:"38px"}},r.a.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:this.handleDropDownClick},n),r.a.createElement("div",{className:"dropdown-menu",id:"div-dropdown-menu"},a.map((function(t,a){return r.a.createElement("li",{className:"dropdown-item",style:{cursor:"pointer"},key:a,onClick:e.handleDropDownItemClick},t)})))),r.a.createElement("input",{type:"text",className:"input-search-bar form-control","aria-label":"Text input with dropdown button",name:"search-text",value:this.state.value,onChange:this.handleChange,onKeyUp:this.enterTriggerSearch}),r.a.createElement("i",{onClick:this.clickTriggerSearch}))}}]),a}(r.a.Component)),ne=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).handleModelPreContent=function(e){var t=[{value:"All",label:"All"}];if("All"===e)return t;for(var a=0;a<U[e].length;a++){var n=U[e][a];t.push({value:n,label:n})}return t},n.handleColorChange=function(e){var t=n.state.userInput;t.color.value!==e.value&&(t.color=e,n.setState({userInput:t}))},n.handleBrandChange=function(e){var t=n.state,a=t.userInput,r=t.modelPreContent;a.brand.value!==e.value&&(r=n.handleModelPreContent(e.value),a.brand=e,a.model=r[0],n.setState({userInput:a,modelPreContent:r}))},n.handleModelChange=function(e){var t=n.state.userInput;t.model.value!==e.value&&(t.model=e,n.setState({userInput:t}))},n.transferMsg=function(e,t){var a=n.state.userInput;if("SEARCH FIELD"===t&&(a.searchField=e,n.setState({userInput:a})),"TRIGGER SEARCH"===t){var r={};r.color=a.color.value,r.brand=a.brand.value,r.model=a.model.value,r.searchField=a.searchField,r.searchText=e,n.props.fromSearchFieldToParent(r)}};var r=[{value:"All",label:"All"}];Object.keys(U).map((function(e,t){r.push({value:e,label:e})}));var l=n.handleModelPreContent(r[0].value);return n.state={colorPreContent:[{value:"All",label:"All"},{value:"WHITE",label:"WHITE"},{value:"BLACK",label:"BLACK"},{value:"PURPLE",label:"PURPLE"},{value:"BLUE",label:"BLUE"},{value:"NAVY",label:"NAVY"},{value:"GREEN",label:"GREEN"},{value:"YELLOW",label:"YELLOW"},{value:"ORANGE",label:"ORANGE"},{value:"RED",label:"RED"},{value:"\u0e40\u0e17\u0e32",label:"\u0e40\u0e17\u0e32"}],brandPreContent:r,modelPreContent:l,userInput:{searchField:"Plate Number",searchText:"",color:{value:"All",label:"All"},brand:{value:"All",label:"All"},model:{value:"All",label:"All"}}},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.userInput,n=t.colorPreContent,l=t.brandPreContent,o=t.modelPreContent;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body row"},r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Color"),r.a.createElement(_.a,{defaultValue:{value:"All",label:"All"},options:n,onChange:this.handleColorChange})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Brand"),r.a.createElement(_.a,{value:a.brand,options:l,onChange:this.handleBrandChange})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Model"),r.a.createElement(_.a,{value:a.model,options:o,onChange:this.handleModelChange})),r.a.createElement(ae,{transferMsg:function(t,a){return e.transferMsg(t,a)},label:"search-field",fields:a.searchField,data:["Plate Number","Owner"]})))}}]),a}(r.a.Component),re=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var a=t.target.getAttribute("name"),n=e.props.currentPageCount;if(parseInt(a)!==n){switch(a){case"pre":n--;break;case"nex":n++;break;default:n=a}e.props.fromPaginationToParent(n)}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentPageCount,n=t.dataCount,l=t.dataPerPage,o=Math.ceil(n/l),s=[];if(o<=5)for(var i=0;i<o;i++)s.push(i+1);else{var c,u;if(u=a+2,s=[a-2,a-1,a,a+1,a+2],(c=a-2)<=0){var m=-c,d=s[s.length-1];s.splice(0,m+1);for(var p=0;p<m+1;p++)d+=1,s.push(d)}if(u>o){var g=u-o,h=s[0];s.splice(s.length-g,g+1);for(var f=0;f<g;f++)h-=1,s.unshift(h)}}return r.a.createElement("ul",{className:"pagination",style:{margin:"0 auto"}},r.a.createElement("li",{className:"page-item ".concat(1===a?"disabled":"")},r.a.createElement("p",{className:"page-link",role:"button",onClick:this.handleClick,name:"pre"},"\u2039")),s.map((function(t,n){return r.a.createElement("li",{key:n,className:"page-item ".concat(a===t?"active":"")},r.a.createElement("p",{className:"page-link",role:"button",onClick:e.handleClick,name:t},t))})),r.a.createElement("li",{className:"page-item ".concat(a===o?"disabled":"")},r.a.createElement("p",{className:"page-link",role:"button",onClick:this.handleClick,name:"nex"},"\u203a")))}}]),a}(r.a.Component),le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.isLoading;return r.a.createElement("div",null,r.a.createElement("div",{className:"modal-backdrop fade ".concat(e?"show":"d-none")}),r.a.createElement("div",{className:"text-center fade ".concat(e?"show":""),style:{position:"fixed",left:"50%",bottom:"50%",zIndex:"1060"}},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))}}]),a}(r.a.Component),oe=a(314),se=a(320),ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).handleModelPreContent=function(e){for(var t=[],a=0;a<U[e].length;a++){var n=U[e][a];t.push({value:n,label:n})}return t},n.onDrop=function(e){var t=n.state.editingData;t.carImages=e,n.setState({editingData:t})},n.informAlert=function(e,t){var a=n.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),n.setState({alert:a})},n.handleOwnerChange=function(e){var t=n.state.editingData;t.owner=e,n.setState({editingData:t})},n.handlePlateChange=function(e){var t=n.state.editingData;t.plateNumber=e.target.value,n.setState({editingData:t})},n.handleYearChange=function(e){var t=n.state.editingData;t.year=e.target.value,n.setState({editingData:t})},n.handleColorChange=function(e){var t=n.state.editingData;t.color=e,n.setState({editingData:t})},n.handleBrandChange=function(e){var t=n.state,a=t.editingData,r=t.modelPreContent;a.brand=e,r=n.handleModelPreContent(a.brand.value),a.model=r[0],n.setState({editingData:a,modelPreContent:r})},n.handleModelChange=function(e){var t=n.state.editingData;t.model=e,n.setState({editingData:t})},n.handleImageCloseCLick=function(e){var t=n.state.editingData,a=e.target.getAttribute("idx");t.imageURLs.splice(parseInt(a),1),n.setState({editingData:t})},n.handleUpdate=function(){var e,t=n.state.editingData,a=Object(X.a)(Object(X.a)({},t),{},{imageURLs:t.imageURLs.join(","),brand:t.brand.value,model:t.model.value,color:t.color.value,owner:t.owner.value});n.setState({isLoading:!0}),(e=a,T(L+"/cars/update",e,"POST")).then((function(e){0===e.data.err_code?(n.props.onHide(),n.props.fromModalToParent("REQUEST DATA",e.data.car)):n.informAlert("Update fail ".concat(e.data.message),"danger"),n.setState({isLoading:!1})})).catch((function(e){n.setState({isLoading:!1}),n.informAlert("Update fail ".concat(e),"danger")}))};var r=[];Object.keys(U).map((function(e,t){r.push({value:e,label:e})}));var l=n.handleModelPreContent(r[0].value);return n.state={colorPreContent:[{value:"WHITE",label:"WHITE"},{value:"BLACK",label:"BLACK"},{value:"PURPLE",label:"PURPLE"},{value:"BLUE",label:"BLUE"},{value:"NAVY",label:"NAVY"},{value:"GREEN",label:"GREEN"},{value:"YELLOW",label:"YELLOW"},{value:"ORANGE",label:"ORANGE"},{value:"RED",label:"RED"},{value:"\u0e40\u0e17\u0e32",label:"\u0e40\u0e17\u0e32"}],isLoading:!1,brandPreContent:r,modelPreContent:l,ownerPreContent:[],editingData:{brand:"",color:"",model:"",imageURLs:[],carImages:[],owner:"",plateNumber:"",year:"",_id:""},alert:{type:"success",value:"success",timeStamp:Date.now()}},n}return Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){console.log(e);var a=this.state,n=a.editingData,r=a.modelPreContent;r=(n=Object(X.a)({},e.editingdata)).brand?this.handleModelPreContent(n.brand):[],n.brand={value:n.brand,label:n.brand},n.color={value:n.color,label:n.color},n.model={value:n.model,label:n.model},n.owner={value:n.owner._id,label:n.owner.name},n.carImages=[],this.setState({editingData:n,modelPreContent:r,ownerPreContent:e.ownerprecontent})}},{key:"render",value:function(){var e=this,t=this.state,a=t.editingData,n=t.ownerPreContent,l=t.colorPreContent,o=t.brandPreContent,s=t.modelPreContent,i=t.isLoading,c=t.alert;return r.a.createElement(oe.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(oe.a.Header,{closeButton:!0},r.a.createElement(oe.a.Title,{id:"contained-modal-title-vcenter",className:"row"})),r.a.createElement("h5",null,r.a.createElement("li",{className:"list-group-item list-group-item-info"},"Owner:",r.a.createElement(_.a,{options:n,value:a.owner,onChange:this.handleOwnerChange}))),r.a.createElement(oe.a.Body,null,r.a.createElement("div",{className:"row-cols-2"},a.imageURLs?a.imageURLs.map((function(t,a){return r.a.createElement("div",{className:"col",style:{display:"inline-block"},key:a},r.a.createElement("img",{src:"http://127.0.0.1:4000/images/".concat(t),alt:"",className:"img-thumbnail",style:{width:"-webkit-fill-available"}}),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",style:{position:"absolute",top:"10px",right:"30px"}},r.a.createElement("span",{"aria-hidden":"true",idx:a,onClick:e.handleImageCloseCLick},"\xd7")))})):null),r.a.createElement(W.a,{withIcon:!0,buttonText:"Choose images",onChange:this.onDrop,imgExtension:[".jpg","jpeg",".gif",".png"],label:"Max file size: 5mb, accepted: jpg|jpeg|gif|png",maxFileSize:5242880,withPreview:!0}),r.a.createElement("h4",null,"Car info:"),r.a.createElement(se.a.Item,{action:!0,variant:"light"},"Plate Number:",r.a.createElement("input",{type:"text",className:"form-control",value:a.plateNumber,onChange:this.handlePlateChange})),r.a.createElement(se.a.Item,{action:!0,variant:"light"},"Year:",r.a.createElement("input",{type:"number",className:"form-control",value:a.year,onChange:this.handleYearChange})),r.a.createElement(se.a.Item,{action:!0,variant:"light"},"Color:",r.a.createElement(_.a,{options:l,value:a.color,onChange:this.handleColorChange})),r.a.createElement(se.a.Item,{action:!0,variant:"light"},"Car Brand:",r.a.createElement(_.a,{options:o,value:a.brand,onChange:this.handleBrandChange})),r.a.createElement(se.a.Item,{action:!0,variant:"light"},"Car Model:",r.a.createElement(_.a,{options:s,value:a.model,onChange:this.handleModelChange}))),r.a.createElement(z,{type:c.type,value:c.value,timeStamp:c.timeStamp,alertId:"alert-cars-modal"}),r.a.createElement(oe.a.Footer,null,r.a.createElement(p.a,{variant:"primary",type:"submit",style:{position:"relative"},disabled:!!i,onClick:this.handleUpdate},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(i?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),i?"Loading...":"Update")))}}]),a}(r.a.Component),ce=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).requestCarsData=function(e){n.setState({isLoading:!0}),O(e).then((function(e){0===e.data.err_code?n.setState({cars:e.data.cars,carsCount:e.data.count,isLoading:!1}):(n.setState({isLoading:!1}),n.informAlert("Request data fail ".concat(e.data.message),"danger"))})).catch((function(e){n.setState({isLoading:!1}),n.informAlert("Request data fail ".concat(e),"danger")}))},n.informAlert=function(e,t){var a=n.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),n.setState({alert:a})},n.toggleModal=function(){var e=n.state.modalShow;n.setState({modalShow:!e})},n.fromCardToParent=function(e,t){switch(e){case"EDIT":n.setState({editingData:t}),n.toggleModal();break;case"DELETE SUC":n.requestCarsData({currentPageCount:n.state.currentPageCount});break;case"DELETE FAIL":n.informAlert(t,"danger")}},n.fromModalToParent=function(e,t){switch(e){case"REQUEST DATA":n.requestCarsData({currentPageCount:n.state.currentPageCount})}},n.fromWrapperToParent=function(e,t){switch(e){case"REQUEST DATA":n.requestCarsData({currentPageCount:n.state.currentPageCount});break;case"TRANSFER DATA":n.setState({ownerPreContent:t})}},n.fromSearchFieldToParent=function(e){e.currentPageCount=1,n.requestCarsData(e)},n.transferMsgFromPagination=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),t=parseInt(t),e.next=4,n.requestCarsData(t);case 4:n.setState({currentPageCount:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={fields:["Name","Phone","Email"],keys:["name","phone","email"],cars:[],currentPageCount:1,carsCount:1,isLoading:!0,modalShow:!1,ownerPreContent:[],editingData:{brand:"",color:"",imageURLs:[],newImages:[],model:"",owner:{_id:"",name:""},plateNumber:"",year:"",_id:""},alert:{type:"success",value:"success",timeStamp:Date.now()}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestCarsData({currentPageCount:1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.cars,n=t.modalShow,l=t.isLoading,o=t.currentPageCount,s=t.carsCount,i=t.editingData,c=t.ownerPreContent;return r.a.createElement("div",{style:{padding:"30px"}},r.a.createElement(z,{type:alert.type,value:alert.value,timeStamp:alert.timeStamp,alertId:"alert-page-cars"}),r.a.createElement(ie,{fromModalToParent:function(t,a){return e.fromModalToParent(t,a)},ownerprecontent:c,editingdata:i,show:n,onHide:this.toggleModal}),r.a.createElement(le,{isLoading:l}),r.a.createElement(Q,{editingData:i,fromWrapperToParent:function(t,a){return e.fromWrapperToParent(t,a)}}),r.a.createElement("br",null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"sticky-top",style:{marginBottom:"20px"}},r.a.createElement(ne,{fromSearchFieldToParent:function(t){return e.fromSearchFieldToParent(t)}})),r.a.createElement("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4"},a.map((function(t,a){return r.a.createElement(te,{fromCardToParent:function(t,a){return e.fromCardToParent(t,a)},key:a,data:t})}))),r.a.createElement("div",{className:"row"},r.a.createElement(re,{fromPaginationToParent:function(t,a){return e.transferMsgFromPagination(t,a)},dataPerPage:18,currentPageCount:o,dataCount:s})))))}}]),a}(r.a.Component),ue=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).informAlert=function(e,t){var a=n.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),n.setState(Object(X.a)(Object(X.a)({},n.state),{},{alert:a}))},n.handleChange=function(e){var t=e.target.value,a=e.target.getAttribute("name");if("phone"===a){if(!/^[0-9]*$/.test(t))return}var r=n.state.userInput;r[a]=t,n.setState(Object(X.a)(Object(X.a)({},n.state),{},{userInput:r}))},n.handleClick=function(e){e.preventDefault();var t=n.state.userInput;if(t.name){if(/^(09)\d{8}$/.test(t.phone)){var a;if(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t.email))n.setState({isLoading:!0}),(a=t,T(L+"/customers/insert",a,"GET")).then((function(e){0===e.data.err_code?(n.props.fromFormToParent(t),t.name="",t.phone="",t.email="",n.informAlert("Insert success","success"),n.setState(Object(X.a)(Object(X.a)({},n.state),{},{userInput:t}))):n.informAlert("Insert fail","danger"),n.setState(Object(X.a)(Object(X.a)({},n.state),{},{isLoading:!1}))})).catch((function(e){n.informAlert("Insert fail ".concat(e),"danger"),n.setState(Object(X.a)(Object(X.a)({},n.state),{},{isLoading:!1})),console.log(e)}));else n.informAlert("Email format is not correct")}else n.informAlert("Phone number format is not correct")}else n.informAlert("Name is empty")},n.state={userInput:{name:"",phone:"",email:""},isLoading:!1,alert:{type:"success",value:"success",timeStamp:Date.now()}},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.userInput,a=e.isLoading,n=e.alert;return r.a.createElement(V.a,null,r.a.createElement(V.a.Row,null,r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Name"),r.a.createElement("input",{type:"text",className:"form-control",style:{textAlign:"left"},onChange:this.handleChange,name:"name",value:t.name})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Phone"),r.a.createElement("input",{type:"text",className:"form-control",style:{textAlign:"left"},onChange:this.handleChange,name:"phone",value:t.phone})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Email"),r.a.createElement("input",{type:"email",className:"form-control",style:{textAlign:"left"},onChange:this.handleChange,name:"email",value:t.email})),r.a.createElement("div",{className:"col-6 col-md-1"},r.a.createElement(p.a,{variant:"primary",type:"submit",style:{top:"30px",position:"relative"},disabled:!!a,onClick:this.handleClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(a?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),a?"Loading...":"Submit"))),r.a.createElement("br",null),r.a.createElement(V.a.Row,null,r.a.createElement(z,{type:n.type,value:n.value,timeStamp:n.timeStamp,alertId:"alert-customers-form"})))}}]),a}(r.a.Component),me=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(e){K()(e.target.nextElementSibling).slideToggle(),K()("#i-angle").toggleClass("rotate-open")},e.fromFormToParent=function(t){e.props.fromWrapperToParent(t)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(J.a,null,r.a.createElement("i",{id:"i-angle",className:"rotate-open"}),r.a.createElement("h5",{className:"card-header",onClick:this.handleClick,style:{cursor:"pointer"}},"\xa0\xa0\xa0\xa0",this.props.cardTitle),r.a.createElement(J.a.Body,null,r.a.createElement(ue,{fromFormToParent:function(t){e.fromFormToParent(t)}})))}}]),a}(r.a.Component),de=a(312),pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).informAlert=function(e,t){var a=n.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),n.setState({alert:a})},n.handleClick=function(e){var t,a,r=n.state,l=r.idxIsLoading,o=r.contents,s=parseInt(e.target.parentElement.parentElement.getAttribute("idx"));if(console.log(s),0===o.length&&(o=n.props.contents),"customers"===n.props.tableRole){var i=o[s];for(var c in i)if(!i[c])return void n.informAlert("One or more required fields are empty");if(!/^(09)\d{8}$/.test(i.phone))return void n.informAlert("Phone number format is not correct");if(!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(i.email))return void n.informAlert("Email format is not correct");t=k,a=D}else if("items"===n.props.tableRole){var u=o[s];for(var m in u)if(("brand"!==m||"services"!==u.type)&&!u[m]&&"products"===u.type)return void n.informAlert("One or more required fields are empty");t=P,a=A}switch(l.push(s),n.setState({idxIsLoading:l}),e.target.getAttribute("name")){case"update":t(o[s]).then((function(e){0===e.data.err_code?n.informAlert("Update success","success"):n.informAlert("Update fail ".concat(e.data.message),"danger");var t=n.state.idxIsLoading;t=t.filter((function(e){return e!==s})),n.setState({idxIsLoading:t})})).catch((function(e){n.informAlert("Update fail ".concat(e),"danger");var t=n.state.idxIsLoading;t=t.filter((function(e){return e!==s})),n.setState({idxIsLoading:t})}));break;case"delete":a({_id:o[s]._id}).then((function(e){0===e.data.err_code?(n.informAlert("Delete success","success"),o.splice(s,1),0===o.length&&n.props.fromTableToParent("REQUEST PREVIOUS")):n.informAlert("Delete fail ".concat(e.data.message),"danger");var t=n.state.idxIsLoading;t=t.filter((function(e){return e!==s})),n.setState({contents:o,idxIsLoading:t})})).catch((function(e){n.informAlert("Delete fail ".concat(e),"danger");var t=n.state.idxIsLoading;t=t.filter((function(e){return e!==s})),n.setState({idxIsLoading:t})}))}},n.handleSelectChange=function(e){var t=e.value.split("-").pop(),a=n.state.contents;0===a.length&&(a=n.props.contents);var r=a[parseInt(t)];r.type=e.label,"services"===e.label&&(r.amount=-1,r.brand=""),"products"===e.label&&(r.amount=0,r.brand=""),n.setState({contents:a},(function(){console.log(n.state.contents)}))},n.handleChange=function(e){var t=e.target.parentElement.parentElement.getAttribute("idx"),a=e.target.getAttribute("name"),r=e.target.value,l=n.state.contents;0===l.length&&(l=n.props.contents),l[t][a]=r,n.setState({contents:l})},n.state={contents:n.props.contents,idxIsLoading:[],alert:{type:"success",value:"success",timeStamp:Date.now()}},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.fields,n=t.keys,l=t.contents,o=this.state,s=o.alert,i=o.idxIsLoading;return r.a.createElement("div",null,r.a.createElement("div",{className:"form-row"},r.a.createElement(z,{type:s.type,value:s.value,timeStamp:s.timeStamp,alertId:"alert-my-table"})),r.a.createElement(de.a,{hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",{className:"thead-dark text-center"},a.map((function(e,t){return r.a.createElement("th",{key:t,width:"".concat(100/a.length,"%")},e)})))),r.a.createElement("tbody",null,l.map((function(t,a){return r.a.createElement("tr",{key:a,idx:a},n.map((function(n,l){return r.a.createElement("td",{key:l},"type"===n?r.a.createElement(_.a,{id:a,value:{value:t[n],label:t[n]},options:[{value:"products-".concat(a),label:"products"},{value:"services-".concat(a),label:"services"}],isDisabled:i.indexOf(a)>-1,onChange:e.handleSelectChange}):r.a.createElement("input",{type:"amount"===n||"price"===n?"number":"text",className:"form-control",name:n,value:t[n],disabled:"services"===t.type&&""===t[n]||-1===t[n]||i.indexOf(a)>-1,onChange:e.handleChange}))})),r.a.createElement("td",{className:"text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",style:{marginRight:"20px"},name:"update",disabled:i.indexOf(a)>-1,onClick:e.handleClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(i.indexOf(a)>-1?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),i.indexOf(a)>-1?"Loading...":"Update"),r.a.createElement("button",{type:"button",className:"btn btn-danger",style:{marginRight:"20px"},name:"delete",disabled:i.indexOf(a)>-1,onClick:e.handleClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(i.indexOf(a)>-1?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),i.indexOf(a)>-1?"Loading...":"Delete")))})))))}}]),a}(r.a.Component),ge=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).fromTableToParent=function(){var e=Object(j.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="REQUEST PREVIOUS"===e.t0?3:11;break;case 3:if(a=n.state.currentPageCount,0!==(a-=1)){e.next=7;break}return e.abrupt("return");case 7:return n.setState({currentPageCount:a}),e.next=10,n.requestData(a);case 10:case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.fromWrapperToParent=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.requestData(n.state.currentPageCount);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.transferMsgFromPagination=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),t=parseInt(t),e.next=4,n.requestData(t);case 4:n.setState({currentPageCount:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.requestData=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({isLoading:!0}),N({currentPageCount:t}).then((function(e){0===e.data.err_code&&n.setState({customers:e.data.customers,customersCount:e.data.customersCount,isLoading:!1})})).catch((function(e){console.log(e),n.setState({isLoading:!1})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={cardTitle:"Add a new customer record",fields:["Name","Phone","Email","Action"],keys:["name","phone","email"],customers:[],currentPageCount:1,customersCount:1,isLoading:!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestData(this.state.currentPageCount);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{padding:"30px"}},r.a.createElement(le,{isLoading:this.state.isLoading}),r.a.createElement(me,{cardTitle:this.state.cardTitle,fromWrapperToParent:function(t){return e.fromWrapperToParent(t)}}),r.a.createElement("br",null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(pe,{tableRole:"customers",fromTableToParent:function(t){return e.fromTableToParent(t)},fields:this.state.fields,keys:this.state.keys,contents:this.state.customers}),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement(re,{fromPaginationToParent:function(t,a){return e.transferMsgFromPagination(t,a)},dataPerPage:10,currentPageCount:this.state.currentPageCount,dataCount:this.state.customersCount})))))}}]),a}(r.a.Component),he=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).informAlert=function(e,t){var a=n.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),n.setState({alert:a})},n.handleChange=function(e){var t=e.target.value,a=e.target.getAttribute("name"),r=n.state.userInput;r[a]=t,n.setState(Object(X.a)(Object(X.a)({},n.state),{},{userInput:r}))},n.handleSelectChange=function(e){var t=n.state.userInput;t.type=e,"services"===e.value&&(t.brand="",t.amount=-1),"products"===e.value&&(t.amount=""),n.setState({userInput:t}),console.log(e)},n.handleClick=function(e){e.preventDefault();var t=n.state,a=t.userInput,r=t.alert;for(var l in a)if(("brand"!==l||"services"!==a.type.value)&&!a[l])return void n.informAlert("One or more required fields are empty");var o,s=Object(X.a)(Object(X.a)({},a),{},{type:a.type.value});n.setState({isLoading:!0}),(o=s,T(L+"/items/insert",o,"GET")).then((function(e){n.setState({isLoading:!1}),0===e.data.err_code?(n.props.fromFormToParent(a),a.name="",a.brand="","services"===a.type.value?a.amount="-1":a.amount="",a.price="",r.type="success",r.value="Insert success",r.timeStamp=Date.now(),n.setState({userInput:a,isLoading:!1,alert:r})):(r.type="danger",r.value="Insert fail ".concat(e.data.message),r.timeStamp=Date.now(),n.setState(Object(X.a)(Object(X.a)({},n.state),{},{isLoading:!1,alert:r}))),console.log(n.state),console.log(e)}))},n.state={userInput:{name:"",type:{value:"products",label:"products"},brand:"",amount:"",price:""},isLoading:!1,alert:{type:"success",value:"success",timeStamp:Date.now()}},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.userInput,n=e.alert;return r.a.createElement(V.a,null,r.a.createElement(V.a.Row,null,r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Name"),r.a.createElement("input",{type:"text",className:"form-control",style:{textAlign:"left"},onChange:this.handleChange,name:"name",value:a.name,disabled:t})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Type"),r.a.createElement(_.a,{value:a.type,options:[{value:"products",label:"products"},{value:"services",label:"services"}],isDisabled:t,onChange:this.handleSelectChange})),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Brand"),r.a.createElement("fieldset",{disabled:"products"!==a.type.value||t},r.a.createElement("input",{type:"text",className:"form-control",style:{textAlign:"left",transition:"all .3s"},onChange:this.handleChange,name:"brand",value:a.brand}))),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Amount"),r.a.createElement("fieldset",{disabled:"products"!==a.type.value||t},r.a.createElement("input",{type:"number",className:"form-control",style:{textAlign:"left",transition:"all .3s"},onChange:this.handleChange,name:"amount",value:a.amount}))),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement(V.a.Label,null,"Price"),r.a.createElement("input",{type:"number",className:"form-control",style:{textAlign:"left"},onChange:this.handleChange,name:"price",value:a.price,disabled:t})),r.a.createElement("div",{className:"col-6 col-md-1"},r.a.createElement(p.a,{variant:"primary",type:"submit",style:{top:"30px",position:"relative"},disabled:!!t,onClick:this.handleClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(t?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),t?"Loading...":"Submit"))),r.a.createElement("br",null),r.a.createElement(V.a.Row,null,r.a.createElement(z,{type:n.type,value:n.value,timeStamp:n.timeStamp,alertId:"alert-items-form"})))}}]),a}(r.a.Component),fe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(e){K()(e.target.nextElementSibling).slideToggle(),K()("#i-angle").toggleClass("rotate-open")},e.fromFormToParent=function(t){e.props.fromWrapperToParent(t)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(J.a,null,r.a.createElement("i",{id:"i-angle",className:"rotate-open"}),r.a.createElement("h5",{className:"card-header",onClick:this.handleClick,style:{cursor:"pointer"}},"\xa0\xa0\xa0\xa0Add a new products/services record"),r.a.createElement(J.a.Body,null,r.a.createElement(he,{fromFormToParent:function(t){return e.fromFormToParent(t)}})))}}]),a}(r.a.Component),ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).fromTableToParent=function(){var e=Object(j.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="REQUEST PREVIOUS"===e.t0?3:11;break;case 3:if(a=n.state.currentPageCount,0!==(a-=1)){e.next=7;break}return e.abrupt("return");case 7:return n.setState({currentPageCount:a}),e.next=10,n.requestData(a);case 10:case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.fromWrapperToParent=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.requestData(n.state.currentPageCount);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.transferMsgFromPagination=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(t),e.next=3,n.requestData(t);case 3:n.setState({currentPageCount:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.requestData=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({isLoading:!0}),x({currentPageCount:t}).then((function(e){0===e.data.err_code&&n.setState({items:e.data.items,itemsCount:e.data.itemsCount,isLoading:!1})})).catch((function(e){n.setState({isLoading:!1}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={fields:["Name","Type","Brand","Amount","Price","Action"],keys:["name","type","brand","amount","price"],items:[],currentPageCount:1,itemsCount:1,isLoading:!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{padding:"30px"}},r.a.createElement(le,{isLoading:this.state.isLoading}),r.a.createElement(fe,{fromWrapperToParent:function(t){return e.fromWrapperToParent(t)}}),r.a.createElement("br",null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(pe,{tableRole:"items",fromTableToParent:function(t){return e.fromTableToParent(t)},fields:this.state.fields,contents:this.state.items,keys:this.state.keys}),r.a.createElement("div",{className:"row"},r.a.createElement(re,{fromPaginationToParent:function(t){return e.transferMsgFromPagination(t)},dataPerPage:10,currentPageCount:this.state.currentPageCount,dataCount:this.state.itemsCount})))))}}]),a}(r.a.Component),be=a(75),Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleDropDownChange=function(e,t){var a,r=n.props.userInput,l=Object(be.a)(n.props.userInput);switch(t){case"type":a=0;break;case"items":a=1}r[a]=e,0===a&&e!==l[0]&&(r[1]="products"===e?n.props.productsName[0]:n.props.servicesName[0]),n.props.transferMsg(l,r,n.props.rowIdx)},n.handleTypeChange=function(e){n.props.fromPreRowContentTransferMsgToParent("CHANGE TYPE",e,n.props.rowIdx)},n.handleItemChange=function(e){n.props.fromPreRowContentTransferMsgToParent("CHANGE ITEM",e,n.props.rowIdx)},n.handleAmountChange=function(e){var t=e.target.value;if(!(t<0)&&t){var a=n.props.userInput;t>a[6]&&"products"===a[0]||(a[3]=t,a[4]=parseInt(a[6])-parseInt(a[3]),a[5]=parseInt(a[2])*parseInt(a[3]),n.props.fromPreRowContentTransferMsgToParent("UPDATE AMOUNT",a,n.props.rowIdx))}},n.handleRemoveClick=function(){n.props.fromPreRowContentTransferMsgToParent("REMOVE ROW","",n.props.rowIdx)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.productsName,n=e.servicesName,l=this.props.userInput;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(_.a,{options:t,value:l[0],onChange:this.handleTypeChange})),r.a.createElement("td",null,r.a.createElement(_.a,{options:"products"===l[0].value?a:n,value:l[1],onChange:this.handleItemChange})),r.a.createElement("td",null,l[2]),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",style:{textAlign:"left"},onChange:this.handleAmountChange,name:"amount",value:l[3]})),r.a.createElement("td",null,l[4]),r.a.createElement("td",null,l[5]),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"btn btn-outline-warning",onClick:this.handleRemoveClick},"Remove")))}}]),a}(r.a.Component),Ce=Object(I.b)((function(e){return{items:e.items}}),{})(Ee),Se=(r.a.Component,function(e){return function(t,a){var n=t[e],r=a[e];return n<r?-1:n>r?1:0}}),ye=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentWillUnmount=function(){n.setState=function(e,t){}},n.requestFail=function(e){n.informAlert("Request data fail ".concat(e),"danger"),n.setState({isDisableButton:!0})},n.informAlert=function(e,t){var a=n.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),n.setState({alert:a})},n.organisingCars=function(){O({currentPageCount:0}).then((function(e){var t=e.data;if(0===t.err_code){for(var a=t.cars,r={},l=0;l<a.length;l++){var o=a[l];o.owner._id in r||(r[o.owner._id]={}),r[o.owner._id][o.plateNumber]={brand:o.brand,model:o.model}}n.setState({cars:r}),n.organisingCustomers()}else n.requestFail(t.message)})).catch((function(e){n.requestFail(e)}))},n.organisingCustomers=function(){N({currentPageCount:0}).then(function(){var e=Object(j.a)(R.a.mark((function e(t){var a,r,l,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===(a=t.data).err_code){for(r=a.customers,l=[],o=0;o<r.length;o++)l.push({value:r[o]._id,label:r[o].name});l.sort(Se("label")),n.setState({customers:l})}else n.requestFail(a.message);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n.requestFail(e)}))},n.handleNameDropDownChange=function(e){var t=n.state,a=t.currentCustomer,r=t.plateNumber,l=t.cars;a.customer=e,a.plateNumber=[],a.brand={value:"",label:""},a.model={value:"",label:""},r=[],e.value in l&&Object.keys(l[e.value]).forEach((function(e,t){r.push({value:e,label:e})})),n.props.fromCustomerInfoTransferMsgToParent(a),n.setState({currentCustomer:a,plateNumber:r})},n.handlePlateDropDownChange=function(e){var t=n.state,a=t.currentCustomer,r=t.cars;a.plateNumber=e;var l=r[a.customer.value][e.value],o=l.brand,s=l.model;a.brand={value:o,label:o},a.model={value:s,label:s},n.props.fromCustomerInfoTransferMsgToParent(a),n.setState({currentCustomer:a})},n.state={customers:[],cars:[],customersName:[],customersId:[],plateNumber:[],currentCustomer:{customer:[],plateNumber:[],brand:{value:"",label:""},model:{value:"",label:""}},alert:{type:"success",value:"success",timeStamp:Date.now()}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.organisingCars()}},{key:"render",value:function(){var e=this.state,t=(e.customersId,e.customers),a=e.currentCustomer,n=e.plateNumber,l=e.alert;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-3"},r.a.createElement("label",null,"Customer name"),r.a.createElement(_.a,{onChange:this.handleNameDropDownChange,value:a.customer,options:t})),r.a.createElement("div",{className:"col-xl-3"},r.a.createElement("label",null,"Plate number"),r.a.createElement(_.a,{onChange:this.handlePlateDropDownChange,value:a.plateNumber,options:n})),r.a.createElement("div",{className:"col-xl-3"},r.a.createElement("label",null,"Car brand"),r.a.createElement(_.a,{isDisabled:!0,value:a.brand})),r.a.createElement("div",{className:"col-xl-3"},r.a.createElement("label",null,"Car model"),r.a.createElement(_.a,{isDisabled:!0,value:a.model})),r.a.createElement("div",{className:"col"},r.a.createElement(z,{type:l.type,value:l.value,timeStamp:l.timeStamp,alertId:"alert-request-customer-info"})))}}]),a}(r.a.Component),Te=a(136),Le=a.n(Te),we=a(132),xe=a(313),Pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.display;console.log(e),console.log(this.props.userInput);var t=this.props,a=t.userInput,n=t.gross,l=t.VAT,o=t.totalPrice;return r.a.createElement("div",{className:"container-fluid",style:{padding:"30px"}},r.a.createElement("div",{className:"row"},r.a.createElement(we.a,{xs:2,md:2},r.a.createElement(xe.a,{src:"https://i.pinimg.com/originals/33/b8/69/33b869f90619e81763dbf1fccc896d8d.jpg",style:{width:"200px",height:"150px"}})),r.a.createElement("div",{className:"col-10"},r.a.createElement("p",null,"row1"),r.a.createElement("p",null,"row2"),r.a.createElement("p",null,"row3"),r.a.createElement("p",null,"row4"))),r.a.createElement("h1",{style:{textAlign:"center"}},"Title"),r.a.createElement("div",{className:"row",style:{margin:"20px 0px"}},r.a.createElement("span",{className:"col-4",style:{padding:"0px"}},"xxx: xxx"),r.a.createElement("span",{className:"col-4",style:{textAlign:"center",padding:"0px"}},"xxx: xxx"),r.a.createElement("span",{className:"col-4",style:{textAlign:"center",padding:"0px"}},"xxx: xxx")),r.a.createElement("p",{style:{margin:"20px 0px"}},"xx: "),r.a.createElement("p",{style:{margin:"20px 0px"}},"xx: "),r.a.createElement("div",{className:"row",style:{margin:"20px 0px"}},r.a.createElement("span",{className:"col-4",style:{padding:"0px"}},"xxx: xxx"),r.a.createElement("span",{className:"col-4",style:{textAlign:"center",padding:"0px"}},"xxx: xxx"),r.a.createElement("span",{className:"col-4",style:{textAlign:"center",padding:"0px"}},"xxx: xxx")),r.a.createElement(de.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Item Name"),r.a.createElement("th",null,"Unit Price"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"????"),r.a.createElement("th",null,"Total Price"))),r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e[1].value),r.a.createElement("td",null,e[2]),r.a.createElement("td",null,e[3]),r.a.createElement("td",null),r.a.createElement("td",null,e[4]))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4},"Gross"),r.a.createElement("td",null,n)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4},"7%"),r.a.createElement("td",null,l)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4},"Total Price"),r.a.createElement("td",null,o)))),r.a.createElement("div",{className:"row",style:{marginTop:"20px"}},r.a.createElement("span",{className:"col-5",style:{margin:"10px 20px"}},"xxx"),r.a.createElement("span",{className:"col-5",style:{margin:"10px 20px"}},"xxx")))}}]),a}(r.a.Component),Ae=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentWillUnmount=function(){n.setState=function(e,t){}},n.organisingItems=function(){x({currentPageCount:0}).then((function(e){var t=e.data;if(0===t.err_code){for(var a={},r={},l=[],o=[],s=0;s<t.items.length;s++)"products"===t.items[s].type?(l.push({value:t.items[s].name,label:t.items[s].name}),l=l.sort(Se("label")),a[t.items[s].name]={amount:t.items[s].amount,id:t.items[s]._id,brand:t.items[s].brand,price:t.items[s].price}):(o.push({value:t.items[s].name,label:t.items[s].name}),o=o.sort(Se("label")),r[t.items[s].name]={amount:t.items[s].amount,id:t.items[s]._id,brand:t.items[s].brand,price:t.items[s].price});var i=n.state.remainingLoad;n.setState({remainingLoad:i-1,products:a,services:r,productsName:l,servicesName:o})}else n.requestFail(t.message)})).catch((function(e){n.requestFail(e),console.log(e)}))},n.requestFail=function(e){n.informAlert("Request data fail ".concat(e),"danger");var t=n.state.remainingLoad;n.setState({isDisableButton:!0,remainingLoad:t-1})},n.rollBackArray=function(e,t){var a;switch(0===n.state.productsName.length&&0===n.state.servicesName.length&&n.setState({isDisableButton:!1}),e.value){case"products":if(0===(a=n.state.productsName).length){var r=n.state.type;r.unshift({value:"products",label:"products"}),n.setState({type:r})}a.push(t),a=a.sort(Se("label")),n.setState({productsName:a});break;case"services":if(0===(a=n.state.servicesName).length){var l=n.state.type;l.push({value:"services",label:"services"}),n.setState({type:l})}a.push(t),a=a.sort(Se("label")),n.setState({servicesName:a})}},n.filterTheArray=function(e,t){var a,r=t.value,l=n.state,o=l.productsName,s=l.servicesName,i=l.type;switch(e.value){case"products":0===(a=o.filter((function(e){return e.value!==r}))).length&&n.setState({type:i.filter((function(e){return"products"!==e.value}))}),1===i.length&&0!==s.length&&(i.push({value:"services",label:"services"}),n.setState({type:i})),n.setState({productsName:a});break;case"services":console.log(s),0===(a=s.filter((function(e){return e.value!==r}))).length&&n.setState({type:i.filter((function(e){return"services"!==e.value}))}),1===i.length&&0!==o.length&&(i.unshift({value:"products",label:"products"}),n.setState({type:i})),n.setState({servicesName:a})}(1===o.length&&0===s.length||0===o.length&&1===s.length)&&n.setState({isDisableButton:!0})},n.handleClick=function(){var e,t,a,r,l=n.state,o=l.userInput,s=l.productsName,i=l.servicesName,c=l.products,u=l.services;if(0!==s.length)e={value:"products",label:"products"},a=c[(t=s[0].value?{value:s[0].value,label:s[0].value}:"").value].amount?c[t.value].amount:0,r=c[t.value].price?c[t.value].price:0;else{if(0===i.length)return;e={value:"services",label:"services"},a=u[(t=i[0].value?{value:i[0].value,label:i[0].value}:"").value].amount?u[t.value].amount:0,r=u[t.value].price?u[t.value].price:0}o.push([e,t,r,0,a,0*r,a]),n.filterTheArray(e,t),n.calculateTotalPrice(o,n.state.isVAT),n.setState({userInput:o})},n.handleCheckBoxChange=function(e){var t=e.target.checked,a=n.state.userInput;n.setState({isVAT:t}),n.calculateTotalPrice(a,t)},n.informAlert=function(e,t){var a=n.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),n.setState({alert:a})},n.fromPreRowContentTransferMsgToParent=function(e,t,a){var r,l=n.state,o=l.userInput,s=l.productsName,i=l.servicesName,c=o[a],u=Object(be.a)(c);switch(e){case"CHANGE TYPE":if(t.value===c[0].value)return;n.rollBackArray(c[0],c[1]),u[0]=t,"products"===t.value?u[1]=s[0]:u[1]=i[0],n.filterTheArray(u[0],u[1]),r=n.getItemData(u[0],u[1]),u[2]=r.price,u[3]=0,u[4]=r.amount,u[5]=0,u[6]=r.amount,o[a]=u;break;case"CHANGE ITEM":if(t.value===c[1].value)return;u[1]=t,n.rollBackArray(c[0],c[1]),n.filterTheArray(c[0],t),r=n.getItemData(u[0],u[1]),u[2]=r.price,u[3]=0,u[4]=r.amount,u[5]=0,u[6]=r.amount,o[a]=u;break;case"REMOVE ROW":n.rollBackArray(c[0],c[1]),o.splice(a,1);break;case"UPDATE AMOUNT":o[a]=t}n.setState({userInput:o}),n.calculateTotalPrice(o,n.state.isVAT)},n.fromCustomerInfoTransferMsgToParent=function(e){n.setState({customerInfo:e})},n.getItemData=function(e,t){switch(e.value){case"products":return n.state.products[t.value];case"services":return n.state.services[t.value]}},n.calculateTotalPrice=function(e,t){var a=0,r=0;e.map((function(e){a+=parseFloat(e[5])})),t&&(r=a/107*7),n.setState({gross:(a-r).toFixed(2),VAT:r.toFixed(2),totalPrice:a.toFixed(2)})},n.handleSubmit=function(){var e="",t="",a="",r="",l="",o=n.state,s=o.userInput,i=o.products,c=o.services,u=o.totalPrice,m=o.customerInfo;if(0!==s.length){for(var d=0;d<s.length;d++){if(0===parseInt(s[d][3]))return void n.informAlert("The amount should be at least 1");switch(s[d][0].value){case"products":e+="".concat(i[s[d][1].value].id,","),t+="".concat(s[d][1].value,",");break;case"services":e+="".concat(c[s[d][1].value].id,","),t+="".concat(s[d][1].value,",");break;default:return void n.informAlert("Please check your data")}r+="".concat(s[d][2],","),a+="".concat([s[d][3]],","),l+="".concat(s[d][5],",")}if(m.customer){var p={id:m.customer.value,name:m.customer.label,plateNumber:m.plateNumber.value,brand:m.brand.value,model:m.model.value};e=e.substring(0,e.length-1),t=t.substring(0,t.length-1),a=a.substring(0,a.length-1),r=r.substring(0,r.length-1),l=l.substr(0,l.length-1);var g=Object(X.a)({itemsId:e,itemsName:t,amount:a,unitPrice:r,price:l,totalPrice:u},p);n.setState({remainingLoad:1}),console.log(g),function(e){return T(L+"/sales/insert",e,"GET")}(g).then((function(e){if(0===e.data.err_code){n.informAlert("Insert success","success");for(var t=n.state.userInput,a=0;a<t.length;a++)n.rollBackArray(t[a][0],t[a][1]);t.splice(0,t.length),n.setState({userInput:t,gross:0,VAT:0,totalPrice:0})}else n.requestFail(e.data.message);n.componentDidMount()})).catch((function(e){n.requestFail(e)}))}else n.informAlert("The customer name is empty")}else n.informAlert("The form is empty")},n.test=function(){console.log(1)},n.state={fields:["Type","Item","Unit Price","Amount","Remaining Amount","Total","Action"],type:[{value:"products",label:"products"},{value:"services",label:"services"}],productsName:[],servicesName:[],products:{},services:{},customerInfo:{customer:"",plateNumber:"",brand:"",model:""},remainingLoad:1,submitIsLoading:!1,userInput:[],tmpUserInput:[],isDisableButton:!1,isVAT:!1,gross:0,VAT:0,totalPrice:0,componentToPrintIsDisplay:!1,alert:{type:"success",value:"success",timeStamp:Date.now()}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.organisingItems()}},{key:"render",value:function(){var e=this,t=this.state,a=t.userInput,n=(t.tmpUserInput,t.gross),l=t.VAT,o=t.totalPrice,s=t.isDisableButton,i=t.remainingLoad,c=t.alert;t.componentToPrintIsDisplay;return r.a.createElement("div",null,r.a.createElement(le,{isLoading:0!==i}),r.a.createElement(ye,{fromCustomerInfoTransferMsgToParent:function(t){return e.fromCustomerInfoTransferMsgToParent(t)}}),r.a.createElement("br",null),r.a.createElement("div",{className:"text-right"},r.a.createElement(Le.a,{onBeforePrint:function(){e.handleSubmit()},onAfterPrint:function(){},trigger:function(){return r.a.createElement("button",{type:"button",className:"btn btn-light",style:{marginRight:"20px"},disabled:0!==i},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(0===i?"d-none":"show"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),0===i?"SAVE&PRINT":"Loading...")},content:function(){return e.componentRef}}),r.a.createElement("button",{className:"btn btn-dark",type:"submit",style:{position:"relative"},disabled:0!==i,onClick:this.handleSubmit},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(0===i?"d-none":"show"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),0===i?"SAVE":"Loading...")),r.a.createElement("br",null),r.a.createElement(de.a,{hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",{className:"thead-dark"},this.state.fields.map((function(e,t){return r.a.createElement("th",{key:t,style:{width:"14.2%"}},e)})))),r.a.createElement("tbody",null,a.map((function(t,a){return r.a.createElement(Ce,{key:a,rowIdx:a,fromPreRowContentTransferMsgToParent:function(t,a,n){return e.fromPreRowContentTransferMsgToParent(t,a,n)},type:e.state.type,productsName:e.state.productsName,servicesName:e.state.servicesName,productsItems:e.state.products,servicesItems:e.state.services,userInput:t})})),r.a.createElement("tr",{className:"table-secondary"},r.a.createElement("td",{colSpan:"6",className:"text-right"},"Gross:"),r.a.createElement("td",null,n)),r.a.createElement("tr",{className:"table-secondary"},r.a.createElement("td",{colSpan:"6",className:"text-right"},r.a.createElement("input",{type:"checkbox",style:{marginRight:"10px"},onChange:this.handleCheckBoxChange}),"VAT:"),r.a.createElement("td",null,l)),r.a.createElement("tr",{className:"table-secondary"},r.a.createElement("td",{colSpan:"6",className:"text-right"},"Total Price:"),r.a.createElement("td",null,o)))),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:s,onClick:this.handleClick},"Add a new row")),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(z,{type:c.type,value:c.value,timeStamp:c.timeStamp,alertId:"alert-table-add"})),r.a.createElement(Pe,{userInput:a,gross:n,VAT:l,totalPrice:o,ref:function(t){return e.componentRef=t}}))}}]),a}(r.a.Component),Ne=Object(I.b)((function(e){return{items:e.items}}),{initItemsData:function(e){return function(t){t(function(e){return{type:"init",data:e}}(e))}}})(Ae),ke=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(e){K()(e.target.nextElementSibling).slideToggle(),K()("#i-angle").toggleClass("rotate-open")},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(J.a,null,r.a.createElement("i",{id:"i-angle",className:"rotate-open"}),r.a.createElement("h5",{className:"card-header",onClick:this.handleClick,style:{cursor:"pointer"}},"\xa0\xa0\xa0\xa0Add a new sales record"),r.a.createElement(J.a.Body,null,r.a.createElement(Ne,null)))}}]),a}(r.a.Component),De=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"30px"}},r.a.createElement(ke,null))}}]),a}(r.a.Component),Oe=a(74),Ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Sep","Dec"],datasets:[{label:"Monthly sales",data:this.props.data,fill:!1,borderColor:"#742774"}]};return r.a.createElement(Oe.Line,{key:this.props.flag,data:e})}}]),a}(r.a.Component),Me={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},Re=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e={labels:this.props.data.names,datasets:[{label:"Top sold items in this year",data:this.props.data.amounts,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]};return r.a.createElement(Oe.Bar,{key:this.props.flag,data:e,options:Me})}}]),a}(r.a.Component),je=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(e){K()(e.target.nextElementSibling).slideToggle(),K()("#i-angle").toggleClass("rotate-open")},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.flag;return r.a.createElement(J.a,null,r.a.createElement("i",{id:"i-angle",className:"rotate-open"}),r.a.createElement("h5",{className:"card-header",onClick:this.handleClick,style:{cursor:"pointer"}},"\xa0\xa0\xa0\xa0Charts"),r.a.createElement("div",{className:"row row-cols-1 row-cols-md-2",style:{padding:"30px"}},r.a.createElement("div",{className:"col mb-4"},r.a.createElement("div",{className:"card"},r.a.createElement(Ie,{flag:e,data:this.props.lineChartData}))),r.a.createElement("div",{className:"col mb-4"},r.a.createElement("div",{className:"card"},r.a.createElement(Re,{flag:e,data:this.props.barChartData})))))}}]),a}(r.a.Component),Ge=a(96),Fe=a.n(Ge),Be=function(e){return(e=new Date(e)).getFullYear()+"-"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-")+((e.getDate()<10?"0"+e.getDate():e.getDate())+" ")+((e.getHours()<10?"0"+e.getHours():e.getHours())+":")+((e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":")+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},Xe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).requestData=function(e){n.setState({isLoading:!0});var t,a=n.state,r=a.startDate,l=a.endDate;(t={currentPageCount:e,startTimeStamp:r.getTime(),endTimeStamp:l.getTime()},T(L+"/sales/query",t,"GET")).then((function(t){if(0===t.data.err_code){var a=t.data.sales;console.log(t.data),0===e&&n.organisingChartData(a),a.length>10?(a.splice(10),n.organisingTableData(a)):n.organisingTableData(a)}else console.log(t.data.message),n.informAlert("Request data fail ".concat(t.data.message));n.setState({isLoading:!1,itemsCount:t.data.totalCount})})).catch((function(e){console.log(e),n.informAlert("Request data fail ".concat(e)),n.setState({isLoading:!1})}))},n.organisingChartData=function(e){for(var t=n.state,a=t.arrLineChartData,r=t.objBarChartData,l=t.flag,o={},s=0;s<e.length;s++){a[new Date(e[s].createdTimeStamp).getMonth()]+=e[s].totalPrice;var i=e[s].items;for(var c in i)c in o||(o[c]=0),o[c]+=parseInt(i[c].amount)}var u=Object.keys(o).sort((function(e,t){return o[t]-o[e]}));u.length>5&&u.splice(5);for(var m=[],d=0;d<u.length;d++){var p=u[d];m.push(o[p])}r={names:u,amounts:m},l+=1,n.setState({arrLineChartData:a,objBarChartData:r,flag:l})},n.organisingTableData=function(e){for(var t=[],a=0;a<e.length;a++){var r={dateTime:"",name:"",brand:"",model:"",plateNumber:"",price:"",items:{}};r.dateTime=e[a].createdTimeStamp,r.name=e[a].customer.name,r.brand=e[a].customer.brand,r.model=e[a].customer.model,r.plateNumber=e[a].customer.plateNumber,r.price=e[a].totalPrice,r.items=e[a].items,t.push(r)}n.setState({items:t}),console.log(t)},n.handleStartDateChange=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({startDate:new Date(t.getFullYear(),t.getMonth(),t.getDate()),currentPageCount:1});case 2:return e.next=4,n.requestData(1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleEndDateChange=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({endDate:new Date(t.getFullYear(),t.getMonth(),t.getDate()),currentPageCount:1});case 2:return e.next=4,n.requestData(1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.toggleModal=function(){var e=n.state.modalShow;n.setState({modalShow:!e})},n.handleRowClick=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({currentRow:t.target.getAttribute("rowid")});case 2:n.toggleModal();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleModalHide=function(){n.toggleModal()},n.informAlert=function(e,t){var a=n.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),n.setState({alert:a})},n.transferMsgFromPagination=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),t=parseInt(t),e.next=4,n.requestData(t);case 4:console.log(t),n.setState({currentPageCount:t});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=new Date;return n.state={fields:["Date/time","Customer Name","Car Brand","Model","Number","Price",""],keys:["name","type","brand","amount","price"],currentRow:0,items:[],currentPageCount:1,startDate:new Date(r.getFullYear(),0,1),endDate:new Date(r.getFullYear(),r.getMonth(),r.getDate()+1),itemsCount:1,flag:0,isLoading:!1,arrLineChartData:[0,0,0,0,0,0,0,0,0,0,0,0],objBarChartData:{names:["","","","",""],amounts:[0,0,0,0,0]},modalShow:!1,alert:{type:"success",value:"success",timeStamp:Date.now()}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.requestData(0)}},{key:"render",value:function(){var e=this,t=this.state,a=t.flag,n=t.isLoading,l=t.startDate,o=t.endDate,s=t.alert,i=t.arrLineChartData,c=t.objBarChartData,u=t.items,m=t.fields,d=t.modalShow,g=t.currentRow,h=new Date;function f(e){var t,a=e.editingData;return a&&(t=a.items),r.a.createElement(oe.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(oe.a.Header,{closeButton:!0},r.a.createElement(oe.a.Title,{id:"contained-modal-title-vcenter",className:"row"})),r.a.createElement("h5",null,r.a.createElement("li",{className:"list-group-item list-group-item-info"},"Customer Name: ",a?a.name:"")),r.a.createElement(oe.a.Body,null,r.a.createElement("h4",null,"Date: ",a?Be(a.dateTime):""),r.a.createElement(se.a.Item,{action:!0,variant:"light"},"Car Brand: ",a?a.brand:""),r.a.createElement(se.a.Item,{action:!0,variant:"light"},"Car Model: ",a?a.model:""),r.a.createElement(se.a.Item,{action:!0,variant:"light"},"Plate Number: ",a?a.plateNumber:""),r.a.createElement(de.a,{hover:!0,responsive:!0,className:"text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Item Name"),r.a.createElement("th",null,"Item Amount"),r.a.createElement("th",null,"Item Price"))),r.a.createElement("tbody",null,t?Object.keys(t).map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e),r.a.createElement("td",null,t[e].amount),r.a.createElement("td",null,t[e].price))})):"",r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:"text-right"},r.a.createElement("b",null,"Total Price: ",a?a.price:"")))))),r.a.createElement(oe.a.Footer,null,r.a.createElement(p.a,{onClick:e.onHide},"Close")))}return r.a.createElement("div",{style:{padding:"30px"}},r.a.createElement(le,{isLoading:n}),r.a.createElement(je,{flag:a,lineChartData:i,barChartData:c}),r.a.createElement("br",null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row text-center",style:{marginBottom:"20px"}},r.a.createElement("div",{className:"col-lg-6",style:{marginTop:"20px"}},"start date:\xa0",r.a.createElement(Fe.a,{name:"start",clearIcon:null,disabled:n,onChange:this.handleStartDateChange,maxDate:new Date,value:l})),r.a.createElement("div",{className:"col-lg-6",style:{marginTop:"20px"}},"end date:\xa0",r.a.createElement(Fe.a,{name:"end",clearIcon:null,disabled:n,onChange:this.handleEndDateChange,minDate:l,maxDate:new Date(h.getFullYear(),h.getMonth(),h.getDate()+1),value:o}))),r.a.createElement(z,{type:s.type,value:s.value,timeStamp:s.timeStamp,alertId:"alert-sales-table"}),r.a.createElement(de.a,{hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",{className:"thead-dark text-center",width:"".concat(100/m.length,"%")},m.map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",{className:"text-center"},u.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,Be(t.dateTime)),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.brand),r.a.createElement("td",null,t.model),r.a.createElement("td",null,t.plateNumber),r.a.createElement("td",null,t.price),r.a.createElement("td",null,r.a.createElement(p.a,{rowid:a,variant:"info",onClick:e.handleRowClick},"Detail")))})))),r.a.createElement(f,{editingData:u[g],show:d,onHide:this.handleModalHide}),r.a.createElement("div",{className:"row"},r.a.createElement(re,{fromPaginationToParent:function(t){return e.transferMsgFromPagination(t)},dataPerPage:10,currentPageCount:this.state.currentPageCount,dataCount:this.state.itemsCount})))))}}]),a}(r.a.Component),Ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.user.user;return(e?e._id:E())?r.a.createElement("div",{className:"main"},r.a.createElement(B,null),r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/sales",component:De}),r.a.createElement(h.b,{path:"/sales_report",component:Xe}),r.a.createElement(h.b,{path:"/cars",component:ce}),r.a.createElement(h.b,{path:"/customers",component:ge}),r.a.createElement(h.b,{path:"/items",component:ve}),r.a.createElement(h.a,{to:"/sales_report"}))):r.a.createElement(h.a,{to:"/login"})}}]),a}(r.a.Component),Ue=Object(I.b)((function(e){return{user:e.user}}),{})(Ve);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(291);var qe=a(137),We=a(38),He={},Ke={},ze=Object(We.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return Object(X.a)({},t.data);case"logout":return He;default:return e}},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"init":return Object(X.a)({},t.data);default:return e}}}),_e=a(70),Ye=a(98),Je=a.n(Ye),Qe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).componentWillUnmount=function(){r.setState=function(e,t){}},r.informAlert=function(e,t){var a=r.state.alert;a.type=t||"warning",a.value=e||"Error",a.timeStamp=Date.now(),r.setState({alert:a})},r.handleChange=function(e){var t=e.target.getAttribute("name"),a=e.target.value;"isChecked"===t&&(a=!r.state.isChecked),r.setState(Object(_e.a)({},t,a))},r.handleClick=function(){var e=Object(j.a)(R.a.mark((function e(t){var a,n,l,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"guest"!==t.target.getAttribute("name")){e.next=4;break}return e.next=4,r.setState({username:"guest",password:"00000000"});case 4:if(a=r.state,n=a.username,l=a.password,n&&l){e.next=8;break}return r.informAlert("One or more required fields are empty"),e.abrupt("return");case 8:return r.setState({isLoading:!0}),e.next=11,r.props.login(r.state);case 11:o=r.props.user,console.log(o),0===o.err_code?(r.state.isChecked&&b(o.user._id),r.informAlert("Login success","success"),r.props.history.replace("/")):r.informAlert("Login fail ".concat(o.message),"danger"),r.setState({isLoading:!1});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.enterTriggerSearch=function(){var e=Object(j.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==t.keyCode){e.next=3;break}return e.next=3,r.handleClick(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={user:"",username:"",password:"",isChecked:!1,isLoading:!1,key:0,bgSrc:a(306),alert:{type:"success",value:"success",timeStamp:Date.now()}},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;new Je.a({accessKey:"bwlM1wzrPkZSlj1RXG-MAjNDeSIeV-Gf7nflQ-5hYFU",headers:{"X-Custom-Header":"foo"},timeout:500}).photos.getRandomPhoto({query:"car",orientation:"landscape"}).then(Ye.toJson).then((function(t){e.setState({bgSrc:t.urls.regular,key:1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.alert,n=e.bgSrc,l=e.key,o=this.props.user.user;return(o?o._id:E())?r.a.createElement(h.a,{to:"/sales"}):r.a.createElement("div",null,r.a.createElement($.LazyLoadImage,{key:l,wrapperClassName:"img-fluid",style:{height:"-webkit-fill-available"},effect:"blur",src:n,width:"100%"}),r.a.createElement("div",{className:"card text-center",style:{width:"330px",position:"absolute",top:"20%",left:"calc(50% - 165px)"}},r.a.createElement("div",{className:"card-header"},"Login"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",placeholder:"Username",name:"username",disabled:t,type:"text",value:this.state.username,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",placeholder:"Password",name:"password",disabled:t,type:"password",value:this.state.password,onChange:this.handleChange,onKeyUp:this.enterTriggerSearch})),r.a.createElement("div",{className:"checkbox"},r.a.createElement("label",null,r.a.createElement("input",{name:"isChecked",type:"checkbox",checked:this.state.isChecked,disabled:t,onChange:this.handleChange,value:"Remember Me"})," Remember Me")),r.a.createElement(p.a,{className:"btn btn-lg btn-block",variant:"primary",type:"submit",name:"login",style:{position:"relative"},disabled:!!t,onClick:this.handleClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(t?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),t?"Loading...":"Login"),r.a.createElement(p.a,{className:"btn btn-lg btn-block",variant:"success",type:"submit",name:"guest",style:{position:"relative"},disabled:!!t,onClick:this.handleClick},r.a.createElement("span",{className:"spinner-border spinner-border-sm fade ".concat(t?"show":"d-none"),role:"status","aria-hidden":"true",style:{right:"5px",position:"relative"}}),t?"Loading...":"Login as guest")),r.a.createElement("br",null),r.a.createElement(z,{type:a.type,value:a.value,timeStamp:a.timeStamp,alertId:"alert-login-form"})))))))}}]),n}(r.a.Component),Ze=Object(I.b)((function(e){return{user:e.user}}),{login:function(e){return function(){var t=Object(j.a)(R.a.mark((function t(a){var n,r;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:n=t.sent,r=n.data,a(G(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(Qe),$e=Object(We.e)(ze,Object(We.d)(Object(We.a)(qe.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));o.a.render(r.a.createElement(I.a,{store:$e},r.a.createElement(g.a,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/login",component:Ze}),r.a.createElement(h.b,{component:Ue})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[138,1,2]]]);
//# sourceMappingURL=main.273a423c.chunk.js.map